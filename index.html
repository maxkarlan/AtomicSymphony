<body>
  <script>
        document.addEventListener("DOMContentLoaded", function() {
          
var popUp = null;
document.addEventListener('keydown', function(event) {
  if (event.keyCode == 73) {
    if (popUp == null) {
      popUp = window.open('', '', 'width=200,height=200,top=' + (window.innerHeight / 2 - 100) + ',left=' + (window.innerWidth / 2 - 100));
      popUp.document.body.innerHTML = 'Atomic Symphony Controls<ul><li>Press "R" to add more rectangles.</li><li>Press "O" to convert rectangles to ovals.</li><li>Press "T" to convert ovals to rectangles.</li><li>Press "D" to delete some shapes.</li><li>Press "M" to move the shapes.</li><li>Press "P" to randomly resize all of the shapes.</li><li>Press "G" to double the size of all the shapes.</li><li>Press "J" to half the size of all the shapes.</li><li>Press "S" to spin the shapes.</li><li>Press "K" to toggle a black border around all the shapes.</li><li>Press "C" to make the shapes form a ring.</li><li>Press "V" to vertically line up the shapes.</li><li>Press "H" to horizontally line up the shapes.</li><li>Press "B" to toggle the background color between black and white.</li><li>Left click in the window to repel all shapes within a 200px radius.</li><li>Press spacebar to reset the screen.</li></ul>';
    } else {
      popUp.close();
      popUp = null;
    }
  }
});

var pressR = document.createElement('div');
pressR.innerHTML = 'Press "I" on your keyboard to read the controls';
pressR.style.position = 'absolute';
pressR.style.top = '50%';
pressR.style.left = '50%';
pressR.style.transform = 'translate(-50%, -50%)';
document.body.appendChild(pressR);

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 82) {
    document.body.removeChild(pressR);
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 82) {
    for (var i = 0; i < 30; i++) {
      var rect = document.createElement('div');
      rect.style.position = 'absolute';
      rect.style.top = Math.random() * (window.innerHeight - 100) + 'px';
      rect.style.left = Math.random() * (window.innerWidth - 100) + 'px';
      rect.style.width = Math.random() * 100 + 'px';
      rect.style.height = Math.random() * 100 + 'px';
      rect.style.backgroundColor = 'rgba(' + Math.random() * 255 + ', ' + Math.random() * 255 + ', ' + Math.random() * 255 + ', ' + Math.random() + ')';
      document.body.appendChild(rect);
    }
  }
});
          

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 77) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.top = Math.random() * (window.innerHeight - 100) + 'px';
      rects[i].style.left = Math.random() * (window.innerWidth - 100) + 'px';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 67) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.top = (window.innerHeight / 2 - rects[i].offsetHeight / 2) + 420 * Math.sin(i * 2 * Math.PI / rects.length) + 'px';
      rects[i].style.left = (window.innerWidth / 2 - rects[i].offsetWidth / 2) + 420 * Math.cos(i * 2 * Math.PI / rects.length) + 'px';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 32) {
    while (document.body.firstChild) {
      document.body.removeChild(document.body.firstChild);
    }
    document.body.appendChild(pressR);
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 83) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.transform = 'rotate(' + (Math.random() * 270 + 45) + 'deg)';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 66) {
    if (document.body.style.backgroundColor == 'black') {
      document.body.style.backgroundColor = 'white';
    } else {
      document.body.style.backgroundColor = 'black';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 68) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < 30; i++) {
      document.body.removeChild(rects[i]);
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 72) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.transform = 'rotate(0deg)';
      rects[i].style.top = (i * (window.innerHeight / rects.length)) + 'px';
      rects[i].style.left = '0px';
      rects[i].style.width = window.innerWidth + 'px';
      rects[i].style.height = (window.innerHeight / rects.length) + 'px';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 80) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.width = Math.random() * 100 + 'px';
      rects[i].style.height = Math.random() * 100 + 'px';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 86) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.transform = 'rotate(0deg)';
      rects[i].style.top = '0px';
      rects[i].style.left = (i * (window.innerWidth / rects.length)) + 'px';
      rects[i].style.width = (window.innerWidth / rects.length) + 'px';
      rects[i].style.height = window.innerHeight + 'px';
    }
  }
});
          document.addEventListener('click', function(event) {
  var rects = document.getElementsByTagName('div');
  for (var i = 0; i < rects.length; i++) {
    var rect = rects[i];
    var rectX = parseInt(rect.style.left);
    var rectY = parseInt(rect.style.top);
    var distance = Math.sqrt(Math.pow(event.clientX - rectX, 2) + Math.pow(event.clientY - rectY, 2));
    if (distance < 200) {
      rect.style.transition = 'all 1s';
      rect.style.top = rectY + (rectY - event.clientY) * 0.7 + 'px';
      rect.style.left = rectX + (rectX - event.clientX) * 0.7 + 'px';
    }
  }
});
          document.addEventListener('keydown', function(event) {
  if (event.keyCode == 71) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.width = parseInt(rects[i].style.width) * 2 + 'px';
      rects[i].style.height = parseInt(rects[i].style.height) * 2 + 'px';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 74) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.width = parseInt(rects[i].style.width) / 2 + 'px';
      rects[i].style.height = parseInt(rects[i].style.height) / 2 + 'px';
    }
  }
});
          
  var border = false;
document.addEventListener('keydown', function(event) {
  if (event.keyCode == 75) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      if (border) {
        rects[i].style.border = 'none';
      } else {
        rects[i].style.border = '1px solid black';
      }
    }
    border = !border;
  }
});
   document.addEventListener('keydown', function(event) {
  if (event.keyCode == 79) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.borderRadius = '50%';
    }
  }
});

document.addEventListener('keydown', function(event) {
  if (event.keyCode == 84) {
    var rects = document.getElementsByTagName('div');
    for (var i = 0; i < rects.length; i++) {
      rects[i].style.transition = 'all 1s';
      rects[i].style.borderRadius = '0%';
    }
  }
});
});
  </script>
</body>